<app-botonera-alumnos></app-botonera-alumnos>

<div class="contenedor">
    <div class="row justify-content-center mt-2 mt-b">
        <div class="col-auto">
            <h3>Cliclo Lectivo</h3>
        </div>
    </div>
    <div *ngIf="anios" class="row justify-content-center mt-4">
        <div *ngFor="let anio of anios" class="col-auto">
            <button class="btn btn-primary" role="button" (click)="filtrarAnio(anio)">
                {{anio}}
            </button>    
        </div>
    </div>
    <div class="row justify-content-center mt-4" *ngIf="alumnos_filtrados">
        <h3>{{alumnos[0]?.curso.curso}} - {{alumnos[0]?.curso.division}} - {{alumnos[0]?.curso.especialidad}} -
            {{alumnos[0]?.curso.modalidad}}</h3>
    </div>
    <div class="row">

        <div class="col-10">
            <table class="table my-list mt-5" id="cars-list">
                <thead class="thead" id="thead">
                    <tr>
                        <th> Apellido</th>
                        <th> Nombre </th>
                        <th> DNI </th>
                        <th> CURSO </th>
                        <th> ORIENTACION </th>
                        <th> Última Inscripción </th>
                        <th> </th>
                        <th> </th>
                    </tr>
                </thead>
                <tr class="fila" *ngFor="let alumno of alumnos_filtrados" [routerLink]="['/alumnos/detail/',alumno.id]">
                    <td>
                        {{alumno?.apellido}}
                    </td>
                    <td>
                        {{alumno?.nombre}}
                    </td>
                    <td>
                        {{alumno?.dni}}
                    </td>
                    <td>
                        {{alumno?.curso?.curso}}-{{alumno?.curso?.division}}
                    </td>
                    <td>
                        {{alumno?.curso?.especialidad}}
                    </td>
                    <td>
                        {{alumno?.inscripcion}}
                    </td>
                    <td>
                        <button class="btn btn-primary" [routerLink]="['/alumnos/detail/',alumno.id]">
                            <fa-icon [icon]="ver"></fa-icon>
                        </button>
                    </td>
                    <td>
                        <button class="btn btn-danger" *ngIf="identity?.role==1 && identity?.role==2"
                            (click)="eliminarAlumno(alumno)">
                            <fa-icon [icon]="delete"></fa-icon>
                        </button>
                    </td>

                </tr>
            </table>
            <hr>
            <div class="row justify-content-start">
                <div class="col-auto">
                    <b>Total:</b> {{alumnos_filtrados?.length}}
                </div>
                <div class="col-auto">
                    <b>Varones:</b> {{varones}}
                </div>
                <div class="col-auto">
                    <b>Mujeres: {{mujeres}}</b>
                </div>
            </div>
        </div>
<!--LISTA PARA DESCARGAR PARA ASISTENCIA-->
<!-- {{meses | json}} -->
        <div class="col-10 mt-4">
            <hr>
            <div class="row">
                <div class="col">
                    <h3>Planilla para asistencia</h3>
                </div>
            </div>
            <div class="row align-items-center mt-4">
                <div class="col-auto">
                    MES:
                </div>
                <div class="col-auto">
                    <select name="mes_select" #mes_select="ngModel" [(ngModel)]="mes_selected" class="form-control" (change)="mesSelect()">
                        <option [ngValue]="mes" *ngFor="let mes of meses">{{mes.mes}}</option>
                    </select>
                </div>
            </div>
      
            <div class="row justify-content-end" *ngIf="mes_selected">
                <div class="col-auto">
                    <button class="btn btn-success" (click)="exportarExcel('asistencia')">Exportar</button>
                </div>
            </div>
            <table class="table table-bordered my-list" id="asistencia" *ngIf="mes_selected">
                <thead>
                    <tr>
                      <th>
                          MES:
                      </th>
                        <th colspan="2" class="text-center">
                            {{mes_selected.mes?.toUpperCase()}}
                        </th>
                    </tr>
                    <tr>
                                    <th> Apellido</th>
                                    <th> Nombre </th>
                                    <th> Teléfono </th>
                                    <th *ngFor="let dia of mes_selected.dias">
                                            {{dia}}
                                    </th>
  
                    </tr>
       
        
                </thead>
     
                <tbody>

                    <tr class="fila" *ngFor="let alumno of alumnos_filtrados">
                        <td>
                            {{alumno?.apellido}}
                        </td>
                        <td>
                            {{alumno?.nombre}}
                        </td>
                         <td>
                             {{alumno?.tel_tutor}} / {{alumno?.tel_alumno}}
                        </td>
                        <td *ngFor="let dia of mes_selected.dias">
                        </td>
                    </tr>
                </tbody>
            </table>
            <hr>
            <div class="row justify-content-start">
                <div class="col-auto">
                    <b>Total:</b> {{alumnos_filtrados?.length}}
                </div>
                <div class="col-auto">
                    <b>Varones:</b> {{varones}}
                </div>
                <div class="col-auto">
                    <b>Mujeres: {{mujeres}}</b>
                </div>
            </div>
        </div>
    </div>
</div>