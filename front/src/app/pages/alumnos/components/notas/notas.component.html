<div class="contanier main mt-4" id="boletin">
    <div class="row justify-content-center mt-3 mb-3" *ngIf="alumno">
        <div class="col-auto">
            <button class="btn btn-secondary" [routerLink]="['/alumnos/boletin/',alumno[0]?.id]">Ir a boletín <fa-icon [icon]="download"></fa-icon>
            </button>
        </div>
        <div class="col-auto">
<<<<<<< HEAD
            <button class="btn btn-warning" [routerLink]="['/alumnos/listado-por-curso/',alumno[0]?.curso_id]"><fa-icon [icon]="listado"></fa-icon> Volver al curso
            </button>
        </div>
        <div class="col-auto">
            <button class="btn btn-primary" [routerLink]="['/alumnos/lista']"><fa-icon [icon]="listado"></fa-icon> Volver al listado
            </button>
        </div>
        
        <div class="col-auto">
            <button class="btn btn-dark" [routerLink]="['/alumnos/detail/',alumno[0]?.id]"><fa-icon [icon]="datos"></fa-icon> Volver a datos del alumno
            </button>
        </div>
        <div class="col-auto">
            <button class="btn btn-danger" (click)="deleteCiclo(alumno[0].id)" [disabled]="(identity && identity.role==3)||!identity"><fa-icon [icon]="borrar"></fa-icon> Eliminar un ciclo
=======
            <button class="btn btn-primary" [routerLink]="['/alumnos/lista']"><fa-icon [icon]="listado"></fa-icon> Volver al listado
>>>>>>> 3448f51ab4e12b8cf4d9a5f3973175d48ac96f6e
            </button>
        </div>
        <div class="col-auto">
            <button class="btn btn-dark" [routerLink]="['/alumnos/detail/',alumno[0]?.id]"><fa-icon [icon]="datos"></fa-icon> Volver a datos del alumno
            </button>
        </div>
        <div class="col-auto">
            <button class="btn btn-danger" (click)="deleteCiclo(alumno[0].id)" [disabled]="(identity && identity.role==3)||!identity"><fa-icon [icon]="borrar"></fa-icon> Eliminar un ciclo
            </button>
        </div>
    </div>
    <div class="row justify-content-center">
        <div class="col-auto">
            <h3>
                Notas del Alumno: {{alumno[0]?.apellido}}, {{alumno[0]?.nombre}}
            </h3>
        </div>
    </div>
<<<<<<< HEAD
    <div class="row justify-content-center">
        <div class="col-auto">
            <h3>
                Notas del Alumno: {{alumno[0]?.apellido}}, {{alumno[0]?.nombre}}
            </h3>
        </div>
    </div>
=======
>>>>>>> 3448f51ab4e12b8cf4d9a5f3973175d48ac96f6e
  
    <hr>
   <!-- <pre>
       {{notas | json}}
   </pre> -->
  
 <table class="table mt-4 table-notas col-10 align-items-center" *ngFor="let curso of id_cursos">
            <thead class="thead-dark justify-content-center">
                <tr>
                    <th class="header-curso">{{curso}}</th>
                    <th class="header-curso">Cuatrimestre 1</th>
                    <th class="header-curso">Cuatrimestre 2</th>
                    <th class="header-curso">Nota Final</th>
                    <th class="header-curso">Diciembre</th>
                    <th class="header-curso">Febrero</th>
                    <th class="header-curso">Definitiva</th>
                    <th class="header-curso">
                        <button class="btn btn-circle btn-lg btn-edit" (click)="editEnable()" data-toggle="tooltip"
                            data-placement="Modificar Datos" title="Modificar Datos" [disabled]="!identity || (identity?.role!=1 && identity?.role!=2)">
                            <fa-icon [icon]="edit"></fa-icon>
                        </button>
                    </th>
                    <th class="header-curso">
                        Inscripción
                    </th>
                </tr>
            </thead>
        
            <tbody>
                <tr *ngFor="let nota of notas">
                    <td *ngIf="curso == nota.curso">{{nota.materia}}</td>
                        <td class="text-center" *ngIf="curso == nota.curso">
                            <div *ngIf="!editar">
                                <div *ngIf="!editar">
                                    <p *ngIf="nota.cuatrimestre1>0">
                                        {{nota.cuatrimestre1}}
                                    </p>
                                    <p *ngIf="nota.cuatrimestre1==0">
                                        A
                                    </p>
                                    <p *ngIf="nota.cuatrimestre1<0">
                                        S/C
                                    </p>
                                </div>
                            </div>
                            <select class="form-control" name="nota1" id="nota1" #nota1="ngModel" [(ngModel)]="nota.cuatrimestre1" (change)="modifNota(nota,1)" *ngIf="editar">
                                <option value="1">1</option>
                                <option value="2">2</option>
                                <option value="3">3</option>
                                <option value="4">4</option>
                                <option value="5">5</option>
                                <option value="6">6</option>
                                <option value="7">7</option>
                                <option value="8">8</option>
                                <option value="9">9</option>
                                <option value="10">10</option>
                                <option value="0">A</option>
                                <option value="-1">S/C</option>
                                <option value=""></option>
                            </select>
                            <!-- <input type="number" min="0" max="10" class="form-control calificacion" name="nota1" id="nota1"
                            #nota1="ngModel" [(ngModel)]="nota.cuatrimestre1" [disabled]="!editar"
                            (change)="modifNota(nota,1)" *ngIf="nota.cuatrimestre1!=0">
                            <input  class="form-control calificacion" name="nota1" id="nota1"
                            #nota1="ngModel" [ngModel]="ausente" [disabled]="!editar"
                            (change)="modificarAusente1(nota)" *ngIf="nota.cuatrimestre1==0"> -->
                            <button class="btn btn-warning btn-sm" *ngIf="editarNota && nota_to_edit==nota && cuatrimestre_to_edit==1" (click)="editNota(nota)">Guardar</button>
                        </td>
                        <td class="text-center" *ngIf="curso == nota.curso">
                            <div *ngIf="!editar">
                                <p *ngIf="nota.cuatrimestre2>0">
                                    {{nota.cuatrimestre2}}
                                </p>
                                <p *ngIf="nota.cuatrimestre2==0">
                                    A
                                </p>
                                <p *ngIf="nota.cuatrimestre2<0">
                                    S/C
                                </p>
                            </div>
                            <select class="form-control" name="nota2" id="nota2" #nota1="ngModel" [(ngModel)]="nota.cuatrimestre2" (change)="modifNota(nota,2)" *ngIf="editar" [disabled]="nota.cuatrimestre1==null">
                                <option value="1">1</option>
                                <option value="2">2</option>
                                <option value="3">3</option>
                                <option value="4">4</option>
                                <option value="5">5</option>
                                <option value="6">6</option>
                                <option value="7">7</option>
                                <option value="8">8</option>
                                <option value="9">9</option>
                                <option value="10">10</option>
                                <option value="0">A</option>
                                <option value="-1">S/C</option>
                                <option value=""></option>
                            </select>
                            <!-- <input type="number" min="0" max="10" class="form-control calificacion" name="nota2" id="nota2"
                            #nota2="ngModel" [(ngModel)]="nota.cuatrimestre2" [disabled]="!editar"
                            (change)="modifNota(nota,2)"
                            [readOnly]="nota.cuatrimestre1==null" *ngIf="nota.cuatrimestre2!=0">
                            <input  class="form-control calificacion" name="nota1" id="nota1"
                            #nota1="ngModel" [ngModel]="ausente" [disabled]="!editar"
                            (change)="modificarAusente1(nota)" *ngIf="nota.cuatrimestre2==0"> -->
                            <button class="btn btn-warning btn-sm" *ngIf="editarNota && nota_to_edit==nota && cuatrimestre_to_edit==2" (click)="editNota(nota)">Guardar</button>
                        </td>
                        <td class="text-center" *ngIf="curso == nota.curso">
                            <input type="number" class="form-control calificacion final_anual" name="notaFinal"
                            id="notaFinal" #notaAnual="ngModel" [(ngModel)]="nota.final_anual" [disabled]="!editar"
                            (change)="modifNota(nota,3)" readonly *ngIf="(nota.cuatrimestre1!=null)&&(nota.cuatrimestre2!=null)">
                        </td> 
                        <td class="text-center" *ngIf="curso == nota.curso">
                            <div *ngIf="!editar">
                                <p *ngIf="nota.diciembre>0">
                                    {{nota.diciembre}}
                                </p>
                                <p *ngIf="nota.diciembre==0">
                                    A
                                </p>
                                <p *ngIf="nota.diciembre<0">
                                    S/C
                                </p>
                            </div>
                            <select class="form-control" name="notaDic" id="notaDic" #notaDic="ngModel" 
                            [(ngModel)]="nota.diciembre" (change)="modifNota(nota,4)" *ngIf="editar" 
                            [disabled]="nota.cuatrimestre2==null">
                                <option value="1">1</option>
                                <option value="2">2</option>
                                <option value="3">3</option>
                                <option value="4">4</option>
                                <option value="5">5</option>
                                <option value="6">6</option>
                                <option value="7">7</option>
                                <option value="8">8</option>
                                <option value="9">9</option>
                                <option value="10">10</option>
                                <option value="0">A</option>
                                <option value=""></option>
                            </select>
                            <!-- <input type="number" min="0" max="10" class="form-control calificacion" name="notaDic"
                            id="notaDic" #notaDic="ngModel" [(ngModel)]="nota.diciembre" [disabled]="!editar"
                            (change)="modifNota(nota,4)" [readOnly]="nota.cuatrimestre2==null || nota.febrero!=null" *ngIf="nota.diciembre!=0">
                            <input class="form-control calificacion" name="notaDic"
                            id="notaDic" #notaDic="ngModel" [(ngModel)]="ausente" [disabled]="!editar"
                            (change)="modifNota(nota,5)" [readOnly]="nota.cuatrimestre2==null || nota.febrero!=null" *ngIf="nota.diciembre==0"> -->
                            <button class="btn btn-warning btn-sm" *ngIf="editarNota && nota_to_edit==nota && cuatrimestre_to_edit==4" (click)="editNota(nota)">Guardar</button>
   
                        </td>
                        <td class="text-center" *ngIf="curso == nota.curso">
                            <div *ngIf="!editar">
                                <p *ngIf="nota.febrero>0">
                                    {{nota.febrero}}
                                </p>
                                <p *ngIf="nota.febrero==0">
                                    A
                                </p>
                                <p *ngIf="nota.febrero<0">
                                    S/C
                                </p>
                            </div>
                            <select class="form-control" name="notaFeb" id="notaFeb" #notaFeb="ngModel" 
                            [(ngModel)]="nota.febrero" (change)="modifNota(nota,5)" *ngIf="editar" 
                            [disabled]="nota.cuatrimestre2==null">
                                <option value="1">1</option>
                                <option value="2">2</option>
                                <option value="3">3</option>
                                <option value="4">4</option>
                                <option value="5">5</option>
                                <option value="6">6</option>
                                <option value="7">7</option>
                                <option value="8">8</option>
                                <option value="9">9</option>
                                <option value="10">10</option>
                                <option value="0">A</option>
                                <option value=""></option>
                            </select>
                            <!-- <input type="number" min="0" max="10" class="form-control calificacion" name="notaFeb"
                            id="notaFeb" #notaFeb="ngModel" [(ngModel)]="nota.febrero" [disabled]="!editar"
                            (change)="modifNota(nota,6)" [readOnly]="nota.diciembre>=6 || nota.cuatrimestre2==null" *ngIf="nota.febrero!=0">
                            <input class="form-control calificacion" name="notaFeb"
                            id="notaFeb" #notaFeb="ngModel" [(ngModel)]="ausente" [disabled]="!editar"
                            (change)="modifNota(nota,7)" [readOnly]="nota.diciembre>=6 || nota.cuatrimestre2==null" *ngIf="nota.febrero==0"> -->
                            <button class="btn btn-warning btn-sm" *ngIf="editarNota && nota_to_edit==nota && cuatrimestre_to_edit==5" (click)="editNota(nota)">Guardar</button>
                        </td>
                        <td class="text-center" *ngIf="curso == nota.curso">
                            <input type="number" min="0" max="10" class="form-control calificacion" name="notaDefinitiva"
                            id="notaFinal" #notaAnual="ngModel" [(ngModel)]="nota.definitiva" [disabled]="!editar"
                            (change)="modifNota(nota,8)" [ngClass]="{
                                                                    'aprobado':(nota.definitiva>=6&&nota.modalidad=='Adolescentes' &&nota.observaciones=='Aprobado')
                                                                    ||
                                                                    (nota.definitiva>=4&&nota.modalidad=='Adultos' &&nota.observaciones=='Aprobado'),
                                                                    'desaprobado':(nota.definitiva<6&&nota.modalidad=='Adolescentes' )
                                                                    ||
                                                                    (nota.definitiva<4&&nota.modalidad=='Adultos')
                                                                    }" 
                                                                    readonly>
                        </td>
                        <td *ngIf="curso == nota.curso">
                            <span class="badge badge-secondary">{{nota.observaciones}}</span>
                        </td>
                        <td *ngIf="curso == nota.curso">
                            {{nota.anio}}
                        </td>
                    </tr>  
                </tbody> 
            </table> 
        </div>


        <div class="modal fade" id="eliminarCiclo" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
            <div class="modal-dialog modal-lg" role="document">
              <div class="modal-content">
                <div class="modal-header">
                  <h5 class="modal-title" id="exampleModalLabel">Eliminar Ciclo</h5>
                  <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                  </button>
                </div>
                <div class="modal-body">
                    <div class="row justify-content-center">
                        <div class="col">
                            <h3>Cursos para el alumno</h3>
                        </div>
                    </div>
                    <div class="row justify-content-center">
                        <table class="table">
                            <tbody>
                              <tr *ngFor="let ciclo of ciclos">
                                  <td>{{ciclo.curso}}</td>

                                  <td><button class="btn btn-danger" (click)="borrarCiclo(alumno[0]?.id,ciclo.id_curso)">Eliminar este ciclo</button></td>
                              </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
                <div class="modal-footer">
                  <button type="button" class="btn btn-secondary" data-dismiss="modal">Cerrar</button>
                </div>
              </div>
            </div>
          </div>

